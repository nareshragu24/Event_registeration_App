<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <title>Event Registration</title>
    <style>
      @import url(https://fonts.googleapis.com/css?family=Raleway:300,400,600);
      body{
          margin: 0;
          font-size: .9rem;
          font-weight: 400;
          line-height: 1.6;
          color: #212529;
          text-align: left;
          background-color: #f5f8fa;
      }

      .prev{
          margin-right: 30%;
      }
      .my-form
      {
          padding-top: 1.5rem;
          padding-bottom: 1.5rem;
      }

      .my-form .row
      {
          margin-left: 0;
          margin-right: 0;
      }

      .login-form
      {
          padding-top: 1.5rem;
          padding-bottom: 1.5rem;
      }

      .login-form .row
      {
          margin-left: 0;
          margin-right: 0;
      }
      .slidecontainer {
          width: 100%;
        }

        .slider {
          -webkit-appearance: none;
          width: 100%;
          height: 15px;
          border-radius: 10px;
          background: #d3d3d3;
          outline: none;
          opacity: 0.7;
          -webkit-transition: .2s;
          transition: opacity .2s;
        }

        .slider:hover {
          opacity: 1;
          background:rgba(2, 117, 216,0.4);
        }

        .slider::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: #0275d8;
          cursor: pointer;
        }

        .slider::-moz-range-thumb {
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: #0275d8;
          cursor: pointer;
        }
        .drop-zone {
          max-width: 300px;
          height: 200px;
          padding: 25px;
          display: flex;
          align-items: center;
          justify-content: center;
          text-align: center;
          font-family: "Quicksand", sans-serif;
          font-weight: 500;
          font-size: 20px;
          cursor: pointer;
          color: #cccccc;
          border: 2px dashed #0275d8;
          border-radius: 10px;
        }

        .drop-zone--over {
          border-style: solid;
        }

        .drop-zone__input {
          display: none;
        }

        .drop-zone__thumb {
          width: 100%;
          height: 100%;
          border-radius: 10px;
          overflow: hidden;
          background-color: #cccccc;
          background-size: cover;
          position: relative;
        }

        .drop-zone__thumb::after {
          content: attr(data-label);
          position: absolute;
          bottom: 0;
          left: 0;
          width: 100%;
          padding: 5px 0;
          color: #ffffff;
          background: rgba(0, 0, 0, 0.75);
          font-size: 14px;
          text-align: center;
        }
        .overlay {
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            transition: opacity 500ms;
            visibility: hidden;
            opacity: 0;
        }
        .overlay:target {
          visibility: visible;
          opacity: 1;
        }

        .popup {
          margin: 70px auto;
          padding: 20px;
          background: #fff;
          border-radius: 5px;
          width: 50%;
          position: relative;
          transition: all 5s ease-in-out;
        }
        table {
          width:100%;
        }
        table, th, td {
          border: 1px solid black;
          border-collapse: collapse;
        }
        th, td {
          padding: 15px;
          text-align: left;
        }
        table#t01 tr:nth-child(even) {
          background-color: #eee;
        }
        table#t01 tr:nth-child(odd) {
        background-color: #fff;
        }
        table#t01 th {
          background-color: black;
          color: white;
        }
        .box {
          width: 40%;
          margin: 0 auto;
          background: rgba(255,255,255,0.2);
          padding: 35px;
          border: 2px solid #fff;
          border-radius: 20px/50px;
          background-clip: padding-box;
          text-align: center;
        }

        .popup h2 {
          margin-top: 0;
          color: #333;
          font-family: Tahoma, Arial, sans-serif;
        }
        .popup .close {
          position: absolute;
          top: 20px;
          right: 30px;
          transition: all 200ms;
          font-size: 30px;
          font-weight: bold;
          text-decoration: none;
          color: #333;
        }
        .popup .close:hover {
          color: #06D85F;
        }
        .popup .content {
          max-height: 30%;
          overflow: auto;
        }

        @media screen and (max-width: 700px){
          .box{
            width: 100%;
          }
          .popup{
            width: 100%;
          }
        }
        #linkcolor{
          color: #ffffff;
        }
        body {
          background: #105469;
          font-family: 'Open Sans', sans-serif;
        }
        h2{
          color:#fff;
          text-shadow: 4px 4px #012B39;
          text-align: center;
        }
        a:hover{
          text-decoration: none;
        }
  </style>
</head>
<body>
  <h2>StackHack 1.0</h2>
<main class="my-form">
    <div class="cotainer">

        <div class="row justify-content-center">
            <div class="col-md-8">
                    <div class="card">
                        <div class="card-header">Event Registration</div>
                        <div class="card-body">
                            <form name="form1"  action="/sign_up" method="post" enctype="multipart/form-data" onsubmit="return validate2()">
                                <div class="form-group row">
                                    <label for="full_name" class="col-md-4 col-form-label text-md-right">Full Name</label>
                                    <div class="col-md-6">
                                        <input type="text" id="full_name" class="form-control" name="name" placeholder="hackerearth" required>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="phone_number" class="col-md-4 col-form-label text-md-right">Phone Number</label>
                                    <div class="col-md-6">
                                        <input type="tel" id="phone_number" class="form-control" name="phone" placeholder="9898948484" pattern="[[0-9]{10}"  required>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="email_address" class="col-md-4 col-form-label text-md-right">E-Mail</label>
                                    <div class="col-md-6">
                                        <input type="text" id="email_address" class="form-control" name="email" placeholder="hackerearth@gmail.com" required>
                                    </div>
                                </div>
                                <div class="form-group row">
                                  <label for="permanent_address" class="col-md-4 col-form-label text-md-right">Registration type</label>
                                  <div class="col-md-6">
                                      <select class="form-control" id="sel1" name="type">
                                          <option value="Self">Self</option>
                                          <option value="Group">Group</option>
                                          <option value="Corporate">Corporate</option>
                                          <option value="Others">Others</option>
                                        </select>
                                  </div>
                              </div>
                              <p style="text-align: center;">Note:Self can take only one ticket!</p>
                                <div class="form-group row">
                                    <label for="tickets" class="col-md-4 col-form-label text-md-right">Tickets</label>
                                    <div class="slidecontainer col-md-6">
                                        <input type="range" min="1" max="10" value="1" class="slider" id="myRange" name="ticket" required>
                                        <p>No of Tickets: <span id="demo"></span></p>
                                      </div>
                                    </div>
                                <div class="form-group row">
                                    <label for="nid_number" class="col-md-4 col-form-label text-md-right">ID Card</label>
                                    <div class="col-md-6">
                                        <div class="drop-zone">
                                            <span class="drop-zone__prompt">Drop file here or click to upload</span>
                                            <input type="file" name="image" id="profile-img" accept="image/x-png,image/gif,image/jpeg" class="drop-zone__input" required>
                                          </div>
                                    </div>
                                </div>
                                    <div class="col-md-6 offset-md-4">
                                     <button class="btn btn-primary" onclick="validate()"><a class="button" href="#popup1" id="linkcolor">Preview</a></button>
                                            <div id="popup1" class="overlay">
                                              <div class="popup">
                                                <h3 style="text-align: center;">Your Details!</h3>
                                                <a class="close" href="#">&times;</a>
                                                <div class="content">
                                                  <table id="t01">
                                                    <tr>
                                                      <td>Name</td>
                                                      <td id="name1"></td>
                                                    </tr>
                                                    <tr>
                                                      <td>Email</td>
                                                      <td id="email1"></td>
                                                    </tr>
                                                    <tr>
                                                      <td>Phone</td>
                                                      <td id="phone1"></td>
                                                    </tr>
                                                    <tr>
                                                      <td>Registration type</td>
                                                      <td id="type1"></td>
                                                    </tr>
                                                    <tr>
                                                      <td>Tickets</td>
                                                      <td id="ticket1"></td>
                                                    </tr>
                                                    <tr>
                                                      <td>Id card</td>
                                                      <td id="card1"><img src="" id="profile-img-tag" width="200px" /></td>
                                                    </tr>
                                                  </table>
                                                </div>
                                              </div>
                                            </div>
                                        <button type="submit" class="btn btn-primary">
                                        Register
                                        </button>
                                    </div>
                                </div>
                            </form>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</main>
<script>
    var slider = document.getElementById("myRange");
    var output = document.getElementById("demo");
    output.innerHTML = slider.value;
    slider.oninput = function() {
      output.innerHTML = this.value;
    }
    </script>
    <script>
        document.querySelectorAll(".drop-zone__input").forEach((inputElement) => {
          const dropZoneElement = inputElement.closest(".drop-zone");
          dropZoneElement.addEventListener("click", (e) => {
            inputElement.click();
          });
          inputElement.addEventListener("change", (e) => {
            if (inputElement.files.length) {
              updateThumbnail(dropZoneElement, inputElement.files[0]);
            }
          });
          dropZoneElement.addEventListener("dragover", (e) => {
            e.preventDefault();
            dropZoneElement.classList.add("drop-zone--over");
          });
          ["dragleave", "dragend"].forEach((type) => {
            dropZoneElement.addEventListener(type, (e) => {
              dropZoneElement.classList.remove("drop-zone--over");
            });
          });
          dropZoneElement.addEventListener("drop", (e) => {
            e.preventDefault();
            if (e.dataTransfer.files.length) {
              inputElement.files = e.dataTransfer.files;
              updateThumbnail(dropZoneElement, e.dataTransfer.files[0]);
            }
            dropZoneElement.classList.remove("drop-zone--over");
          });
        });
        /**
         * Updates the thumbnail on a drop zone element.
         *
         * @param {HTMLElement} dropZoneElement
         * @param {File} file
         */
        function updateThumbnail(dropZoneElement, file) {
          let thumbnailElement = dropZoneElement.querySelector(".drop-zone__thumb");
          // First time - remove the prompt
          if (dropZoneElement.querySelector(".drop-zone__prompt")) {
            dropZoneElement.querySelector(".drop-zone__prompt").remove();
          }
          // First time - there is no thumbnail element, so lets create it
          if (!thumbnailElement) {
            thumbnailElement = document.createElement("div");
            thumbnailElement.classList.add("drop-zone__thumb");
            dropZoneElement.appendChild(thumbnailElement);
          }
          thumbnailElement.dataset.label = file.name;
          // Show thumbnail for image files
          if (file.type.startsWith("image/")) {
            const reader = new FileReader();

            reader.readAsDataURL(file);
            reader.onload = () => {
              thumbnailElement.style.backgroundImage = `url('${reader.result}')`;
            };
          } else {
            thumbnailElement.style.backgroundImage = null;
          }
        }
        </script>
        <script>
          function validate()
          {
              var inputtxt=document.form1.name.value;
              var phone=document.form1.phone.value;
              var email=document.form1.email.value;
              var ticket=document.form1.ticket.value;
              var type=document.form1.type.value;
              document.getElementById("name1").innerHTML=inputtxt;
              document.getElementById("email1").innerHTML=email;
              document.getElementById("phone1").innerHTML=phone;
              document.getElementById("ticket1").innerHTML=ticket;
              document.getElementById("type1").innerHTML=type;
              return true;
          }
          function validate2()
          {
              var email=document.form1.email.value;
              var ticket=document.form1.ticket.value;
              var type=document.form1.type.value;
              var regexp=/^([a-z 0-9\._-]+)@([a-z 0-9]+).([a-z]{2,8})(.[a-z]{2,8})?$/;
              if(type=='Self' && ticket!='1')
              {
                alert('Self type can have only one ticket!');
                return false;
              }
              else if(!(regexp.test(email)))
              {
                  alert('Invalid Email Format');
                  return false;
              }
              else{
                return true;
              }
          }
      </script>
<script type="text/javascript">
  function readURL(input) {
      if (input.files && input.files[0]) {
          var reader = new FileReader();
          reader.onload = function (e) {
              $('#profile-img-tag').attr('src', e.target.result);
          }
          reader.readAsDataURL(input.files[0]);
      }
  }
  $("#profile-img").change(function(){
      readURL(this);
  });
</script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
</body>
</html>
